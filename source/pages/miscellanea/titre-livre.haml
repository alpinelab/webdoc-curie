---
layout: nav
images:
  -
    src: "lien"
    desc: "chacha"
  -
    src: "lien"
    desc: "chouchou"
---
#carousel-wraper
  #carousel-curie.carousel.slide{"data-ride" => "carousel"}
    / Wrapper for slides
    .carousel-inner{:role => "listbox"}
      - current_page.data.images.each_with_index do |image, index|
        .item{"data-description" => image["desc"], class: "#{'active' if index==0}"}
          = image_tag lorem.image("600x600")

    / Controls
    %a.left.carousel-control{"data-slide" => "prev", :href => "#carousel-curie", :role => "button"}
      %span.glyphicon.glyphicon-chevron-left
      %span.sr-only Previous
    %a.right.carousel-control{"data-slide" => "next", :href => "#carousel-curie", :role => "button"}
      %span.glyphicon.glyphicon-chevron-right
      %span.sr-only Next
  %li
    %a#carousel-selector-0.selected
      %img.img-responsive{:src => "http://placehold.it/80x60&text=one"}/
  %li
    %a#carousel-selector-1
      %img.img-responsive{:src => "http://placehold.it/80x60&text=two"}/
  #image-description= current_page.data.images.first["desc"]

- content_for :javascripts do
  :coffeescript
    $(document).ready ->

      $('#carousel-curie').on 'slide.bs.carousel', (event)->
        $('#image-description').text($(event.relatedTarget).data('description'))

      # handles the carousel thumbnails
      $("[id^=carousel-selector-]").click ->
        id_selector = $(this).attr("id")
        id = id_selector.substr(id_selector.length - 1)
        id = parseInt(id)
        $("#carousel-curie").carousel id
        $("[id^=carousel-selector-]").removeClass "selected"
        $(this).addClass "selected"
        return

      # when the carousel slides, auto update
      $("#carousel-curie").on "slid", (e) ->
        id = $(".item.active").data("slide-number")
        id = parseInt(id)
        $("[id^=carousel-selector-]").removeClass "selected"
        $("[id=carousel-selector-" + id + "]").addClass "selected"
        return
