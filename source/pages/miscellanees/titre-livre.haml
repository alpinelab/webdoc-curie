---
layout: nav
images:
  -
    src: "http://placehold.it/400x400&text=one"
    desc: "chacha"
  -
    src: "http://placehold.it/400x400&text=two"
    desc: "chouchou"
---
#carousel-wrapper
  #carousel-curie.carousel.slide{"data-ride" => "carousel", "data-interval" => "false"}
    / Wrapper for slides
    .carousel-inner{:role => "listbox"}
      - current_page.data.images.each_with_index do |image, index|
        .item{"data-description" => image["desc"], class: "#{'active' if index==0}"}
          = image_tag image["src"]

  .video-description= current_page.data.images.first["desc"]
  - current_page.data.images.each_with_index do |image, index|
    .video-nav{class: "#{'selected' if index==0}", id: "carousel-selector-#{index}"}
      %img.img-responsive{:src => image["src"]}/

- content_for :javascripts do
  :coffeescript
    $(document).ready ->
      $('#carousel-curie').on 'slide.bs.carousel', (event)->
        $('.video-description').text($(event.relatedTarget).data('description'))
      # handles the carousel thumbnails
      $("[id^=carousel-selector-]").click ->
        id_selector = $(this).attr("id")
        id = id_selector.substr(id_selector.length - 1)
        id = parseInt(id)
        $("#carousel-curie").carousel id
        $("[id^=carousel-selector-]").removeClass "selected"
        $(this).addClass "selected"
        return
      # when the carousel slides, auto update
      $("#carousel-curie").on "slid", (e) ->
        id = $(".item.active").data("slide-number")
        id = parseInt(id)
        $("[id^=carousel-selector-]").removeClass "selected"
        $("[id=carousel-selector-" + id + "]").addClass "selected"
        return
